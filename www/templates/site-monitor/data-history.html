<div ng-controller="SiteHistoryReportCtrl" class="page page-left box-vertical-center">
    <style type="text/css" class="init">
            th,td { white-space: nowrap; }
            div.dataTables_wrapper {
                width: 100%;
                margin: 0 auto;
            }
            table.dataTable.no-footer {
                border-bottom: none;
            }
            table.dataTable thead th, table.dataTable thead td {
                border-bottom: none;
            }
            .dataTables_wrapper.no-footer .dataTables_scrollBody {
                border-bottom: none;
            }
            table.dataTable thead th, table.dataTable thead td {
                background-color: #fff;
                border-right: #ccc 1px solid;
                border-bottom: #ccc 1px solid;
                border-top: #ccc 1px solid;
            }
            table.dataTable.row-border tbody th, table.dataTable.row-border tbody td, table.dataTable.display tbody th, table.dataTable.display tbody td {
                border-right: #ccc 1px solid;
                text-align: center;
            }
            table tr td:first-child, tr th:first-child {
                width: 70px;
            }
            table td, table th {
                border-right: #e8e8e8 1px solid;
                border-bottom: #e8e8e8 1px solid;
                padding: 4px 8px;
                font-weight: normal;
                font-size: 14px;
            }
            table th {
                background-color: #f1f1f1;
            }
            table tbody tr:nth-child(even) td {
                background-color: #f1f1f1;
            }
            table tbody tr:nth-child(odd) td {
                background-color: #fff;
            }
        </style>
    </head>
    <header class="mui-bar bg-header mui-segmented-control-vertical">
        <a class="mui-icon  mui-icon-left-nav mui-pull-left text-white btn-back" onclick="pageBack()"></a>
        <h1 class="mui-title">
            <label ng-if="currentReport !== null" class="dropdown-arrow">
                {{currentReport.name}}
            </label>
            <label ng-if="currentReport === null">历史报表</label>
            <button style="position: absolute;top: 10px;width: 100%;bottom: -8px;left: 8px;background-color: transparent;border: none;"
                    id="reportPicker"></button>
        </h1>

    </header>
    <div class="mui-content">

        <ul class="selector-group">
            <drop-down-menu options="timeTypeList" on-select="onSelect" model-name="'timeType'" selected="timeType"></drop-down-menu>
            <li class="selector-tab">
                <label>{{dateName}}</label>
                <button style="position: absolute;top:0;width: 100%;height: 100%;left: 0;background-color: transparent;border: none;"
                        id="datePicker"></button>
            </li>
            <drop-down-menu options="calcMethodList" on-select="onSelect" model-name="'calcMethod'" default-value="'MAX'" selected="calcMethod"></drop-down-menu>
        </ul>
        <div style="position: absolute; top: 38px;bottom: 0;width: 100%;overflow: auto;border-top: #e8e8e8 1px solid;padding-bottom: 10px;" id="tableParent" site-history-repeat-finish>
            <table id="siteHistoryTable" class="stripe row-border order-column dataTable no-footer">
                <thead>
                    <th ng-repeat="item in tableHeader" site-history-repeat-finish ng-bind-html="item.name|to_trusted"></th>
                </thead>
                <tbody>
                    <tr ng-repeat="item in tableBodyData">
                        <td ng-repeat="col in item" rowspan="{{col.rowSpan || 1}}" colspan="{{col.colSpan || 1}}" ng-style="{backgroundColor: col.backgroundColor}">
                            {{col.value}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="page-alert-wrapper" ng-if="currentReport === null && !isLoading">
            <div class="page-alert">
                <i class="alert-icon no-task"></i>
                <div class="alert-text info">未添加任何报表</div>
            </div>
        </div>
        <div class="page-alert-wrapper" ng-if="tableBodyData.length === 0 && !isLoading">
            <div class="page-alert">
                <i class="alert-icon no-task"></i>
                <div class="alert-text info">没有数据</div>
            </div>
        </div>
        <!--<div class="page-alert-wrapper" ng-if="isLoading">-->
            <!--<div class="page-alert">-->
                <!--<i class="alert-icon loading-spinner"></i>-->
                <!--<div class="alert-text info">正在加载...</div>-->
            <!--</div>-->
        <!--</div>-->
        <div class="page-alert-wrapper" ng-if="loadingFailed">
            <div class="page-alert">
                <i class="alert-icon warning"></i>
                <div class="alert-text info">加载失败，请检查网络</div>
                <div class="alert-reload" ng-click="getDataList()">重新加载</div>
            </div>
        </div>
    </div>
</div>