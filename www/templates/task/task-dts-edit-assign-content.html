<div ng-controller="CommonTaskEditAssignCtrl">
    <header class="mui-bar mui-bar-transparent mui-segmented-control-vertical" style=" -webkit-box-shadow: none;box-shadow: none;position: relative;">
        <a class="mui-icon mui-pull-left mui-control-item" style="font-size: 18px;margin-left: 6px;color: #9e9e9e;top:5px;" ng-click="cancel()">取消</a>
        <h1 class="mui-title" style="font-weight: 400;">{{pageName}}</h1>
        <a class="mui-icon mui-action-menu mui-pull-right mui-control-item" style="font-size: 18px;margin-right: 6px;top:5px;" ng-click="submitAndBack()">确认</a>
    </header>
    <div class="mui-content" style="background-color: #FFF;">
        <div class="mui-input-group task-create-rows dts-create-rows" style="padding: 0 12px;">
            <div class="mui-input-row" ng-if="task.is_defect">
                <label class="label">缺陷等级<span style="color:red">*</span></label>
                <input type="text" name="taskTypeName" ng-model="taskType.name" placeholder="选择缺陷等级" required>
                <button id="taskTypePicker" class="mui-btn mui-btn-block" type="button">&nbsp; </button>
            </div>
            <div class="mui-input-row">
                <label class="label" style="width: 120px;">计划解决时间<span style="color:red">*</span></label>
                <input type="text" name="expectTime" ng-model="expectTime" placeholder="请选择计划解决时间">
                <button type="button" id='expectedTime1' class="btn mui-btn mui-btn-block" style="position: absolute;left: 120px;"></button>
                <div class="error" ng-if="error.time">
                    请选择计划解决时间
                </div>
            </div>
            <div class="mui-input-row">
                <label class="label">维修班组<span style="color:red">*</span></label>
                <div class="right-text" ng-if="selectedTeam">
                    {{selectedTeam.name}}
                </div>
                <div class="right-placeholder" ng-if="!selectedTeam">
                    请选择运维组
                </div>
                <button type="button" class="btn mui-btn mui-btn-block" ng-click="toggleTeamSelector()" style="position: absolute;top: 0;left: 130px;bottom: 0;">&nbsp;</button>
                <div class="error" ng-if="error.team">
                    请选择维修班组
                </div>
            </div>
            <div class="mui-input-row">
                <label class="label">维修工<span style="color:red">*</span></label>
                <div class="right-text" ng-if="selectedUsers.length">
                    <div ng-repeat="h in selectedUsers">{{h.name}}</div>
                </div>
                <div class="right-placeholder" ng-if="!selectedUsers.length">
                    请选择维修人员
                </div>
                <button type="button" class="btn mui-btn mui-btn-block" ng-click="toggleHandlerSelector()" style="position: absolute;top: 0;left: 130px;bottom: 0;">&nbsp;</button>
                <div class="error" ng-if="error.handler">
                    请选择维修人员
                </div>
            </div>
            <div class="mui-input-row" ng-if="task.is_defect">
                <label class="label">复测班组</label>
                <div class="right-text" ng-if="selectedRecheckTeam">
                    {{selectedRecheckTeam.name}}
                </div>
                <div class="right-placeholder" ng-if="!selectedRecheckTeam">
                    请选择复测班组
                </div>
                <button type="button" class="btn mui-btn mui-btn-block" ng-click="toggleRecheckTeamSelector()" style="position: absolute;top: 0;left: 130px;bottom: 0;">&nbsp;</button>
            </div>
            <div class="mui-input-row" ng-if="task.is_defect">
                <label class="label">复测人员</label>
                <div class="right-text" ng-if="selectedRecheckUsers.length">
                    <div ng-repeat="h in selectedRecheckUsers">{{h.name}}</div>
                </div>
                <div class="right-placeholder" ng-if="!selectedRecheckUsers.length">
                    请选择复测人员
                </div>
                <button type="button" class="btn mui-btn mui-btn-block" ng-click="toggleRecheckHandlerSelector()" style="position: absolute;top: 0;left: 130px;bottom: 0;">&nbsp;</button>
                <div class="error" style="color: #666;">
                    不指定复测人员则该缺陷单无复测流程
                </div>
            </div>
        </div>
    </div>
    <div ng-if="teamInited">
        <operator-team-selector default-team="selectedTeam" teams="teams" visible="teamVisible" callback="onSelectedTeam" on-hide="toggleTeamSelector"></operator-team-selector>
        <handlers-selector default-users="selectedUsers" users="selectedTeamUsers" multiple visible="handlerVisible" callback="onSelectedUsers" on-hide="toggleHandlerSelector"></handlers-selector>
        <operator-team-selector default-team="selectedRecheckTeam" teams="teams" visible="recheckTeamVisible" callback="onSelectedRecheckTeam" on-hide="toggleRecheckTeamSelector"></operator-team-selector>
        <handlers-selector default-users="selectedRecheckUsers" users="selectedRecheckTeamUsers" multiple visible="recheckHandlerVisible" callback="onSelectedRecheckUsers" on-hide="toggleRecheckHandlerSelector"></handlers-selector>
    </div>
</div>